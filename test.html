<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        getData();
        function getData() {
            $.get("http://localhost:52557/", function (data) {

                $("#divResult").html(data);

                var items = [];
                var jsonData = $.parseJSON(data)
                var names = Object.keys(jsonData.items[0]);

                //Table Header
                var tbl_header = document.createElement("thead");
                var tbl_hed_row = tbl_header.insertRow();
                $.each(names, function (k, v) {
                    var cell = tbl_hed_row.insertCell();
                    cell.appendChild(document.createTextNode(v.toString()));
                })

                //Table Body
                var tbl_body = document.createElement("tbody");
                $.each(jsonData.items, function () {
                    var tbl_row = tbl_body.insertRow();
                    $.each(this, function (k, v) {
                        var cell = tbl_row.insertCell();
                        var cellVal = (v == null) ? "" : v;
                        cell.appendChild(document.createTextNode(cellVal.toString()));
                    })
                })
                //Table Footer
                var tbl_footer = document.createElement("tfoot");
                var tbl_foot_row = tbl_footer.insertRow();
                $.each(names, function (k, v) {
                    var cell = tbl_foot_row.insertCell();
                    cell.appendChild(document.createTextNode(v.toString()));
                })

                $("#reportTable thead").remove();
                $("#reportTable tbody").remove();
                //Add Table Header
                $("#reportTable").append(tbl_header);
                //Add Table Body
                $("#reportTable").append(tbl_body);
                //Add Table Footer
                //$("#reportTable").append(tbl_footer);

            }).done(function () {
                //Refreshing data
                console.log("Refreshing data");
                setTimeout(getData, 500);
            })
            ;
        }
    </script>
</head>
<body>
    <table id="reportTable" style="border-width:1px;">
        <!--<thead> Generated by JS API call </thead>
                <tbody> Generated by JS API call </tbody>
                <tfoot> Generated by JS API call </tfoot>-->
    </table>
</body>
</html>
